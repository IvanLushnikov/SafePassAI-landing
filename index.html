<!DOCTYPE html>
<html lang="ru" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SafePassAI ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>
  <link rel="icon" href="/favicon.ico" />
</head>
<body class="bg-gray-900 text-gray-100 font-sans flex flex-col min-h-screen">
  <header class="w-full px-6 py-4 flex items-center justify-between border-b border-gray-800">
    <div class="flex gap-6 items-center">
      <h1 class="text-xl font-bold">SafePassAI <span class="text-sm bg-yellow-500 text-black px-2 py-1 rounded ml-2">Beta</span></h1>
      <nav class="hidden md:flex gap-4">
        <a href="/" class="hover:underline">–ü—Ä–æ–≤–µ—Ä–∫–∞</a>
        <a href="/generate" class="hover:underline">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è</a>
        <a href="/security" class="hover:underline">–ë–ª–æ–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</a>
        <a href="/about" class="hover:underline">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
      </nav>
    </div>
    <div class="flex gap-4">
      <a href="https://t.me/SafePassAIBot" class="hover:underline" target="_blank">TG-–±–æ—Ç</a>
      <button id="themeToggle">üåô/‚òÄÔ∏è</button>
    </div>
  </header>

  <main class="p-6 max-w-4xl mx-auto flex-grow">
    <!-- Hero -->
    <section class="text-center my-10">
      <h2 class="text-3xl font-bold mb-4">–ü—Ä–æ–≤–µ—Ä—å, –Ω–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</h2>
      <p class="text-gray-400 mb-6">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ email, IP, —Ç–µ–ª–µ—Ñ–æ–Ω—É –∏ –¥–∞–∂–µ —É–≥–∞–¥—ã–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π</p>
    </section>

    <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ IP -->
    <section class="mb-12">
      <h3 class="text-xl font-semibold mb-4">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ IP</h3>
      <p id="ipMessage" class="text-sm text-gray-400 mb-2">–û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∞—à IP...</p>
      <form id="ipForm" class="flex gap-2 mb-4">
        <input id="ipInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ IP..." class="flex-1 px-3 py-2 rounded bg-gray-800" required />
        <button type="submit" class="px-4 py-2 bg-blue-600 rounded">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      </form>
      <div id="ipResult" class="text-sm"></div>
    </section>
  </main>

  <footer class="text-center text-gray-500 text-sm py-6 border-t border-gray-800">
    ¬© 2025 SafePassAI
  </footer>

  <script>
    document.getElementById('themeToggle').addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
    });

    async function fetchClientIP() {
      const res = await fetch('https://api.ipify.org?format=json');
      return (await res.json()).ip;
    }

    async function fetchIPInfo(ip) {
      const res = await fetch(`https://safe-pass-api.onrender.com/ip-info?ip=${ip}`);
      return await res.json();
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const ip = await fetchClientIP();
      document.getElementById('ipInput').value = ip;
      document.getElementById('ipMessage').textContent = `–í–∞—à IP: ${ip} (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)`;
      const data = await fetchIPInfo(ip);
      renderIPResult(data);
    });

    document.getElementById('ipForm').addEventListener('submit', async e => {
      e.preventDefault();
      const ip = document.getElementById('ipInput').value;
      const data = await fetchIPInfo(ip);
      renderIPResult(data);
    });

    function renderIPResult(data) {
      const div = document.getElementById('ipResult');
      if (data.error) return div.innerHTML = `<span class='text-red-400'>${data.error}</span>`;
      div.innerHTML = `
        <p><strong>–ì–æ—Ä–æ–¥:</strong> ${data.city || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
        <p><strong>–°—Ç—Ä–∞–Ω–∞:</strong> ${data.country || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
        <p><strong>–ü—Ä–æ–≤–∞–π–¥–µ—Ä:</strong> ${data.isp || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
        <p><strong>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:</strong> ${data.timezone || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
        <p><strong>–ú–µ—Å—Ç–Ω–æ–µ –≤—Ä–µ–º—è:</strong> ${data.local_time || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'}</p>
        <p><strong>VPN/Proxy:</strong> ${data.proxy ? '–î–∞' : '–ù–µ—Ç'}</p>
        <p><strong>ASN:</strong> ${data.asn || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
        <p><strong>Reverse DNS:</strong> ${data.reverse_dns || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
        <p><strong>Shodan —É—è–∑–≤–∏–º–æ—Å—Ç–∏:</strong> ${data.ports?.join(', ') || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
        <p><strong>–°–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞:</strong> ${data.speed || '–Ω–µ –∏–∑–º–µ—Ä—è–ª–∞—Å—å'}</p>
        <p><strong>Privacy Score:</strong> ${data.privacy_score ?? '‚Äî'} (${explainPrivacy(data.privacy_score)})</p>
      `;
    }

    function explainPrivacy(score) {
      if (score === 0) return '–í–æ–∑–º–æ–∂–Ω–∞ —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç–∏)';
      if (score <= 2) return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–∫—Å–∏/VPN';
      if (score >= 3) return '–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç–∏';
      return '–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
    }
  </script>
</body>
</html>
