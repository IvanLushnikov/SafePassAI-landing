<!DOCTYPE html>
<html lang="ru" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SafePassAI ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { darkMode: 'class' }
    </script>
    <link rel="icon" href="/favicon.ico" />
  </head>
  <body class="bg-gray-900 text-gray-100 font-sans">
    <header class="w-full px-6 py-4 flex items-center justify-between border-b border-gray-800">
      <h1 class="text-xl font-bold">SafePassAI <span class="text-sm bg-yellow-500 text-black px-2 py-1 rounded ml-2">Beta</span></h1>
      <div class="flex gap-4">
        <a href="https://t.me/SafePassAIBot" class="hover:underline" target="_blank">TG-–±–æ—Ç</a>
        <button id="themeToggle">üåô/‚òÄÔ∏è</button>
      </div>
    </header>

    <main class="p-6 max-w-4xl mx-auto">
      <!-- Hero -->
      <section class="text-center my-10">
        <h2 class="text-3xl font-bold mb-4">–ü—Ä–æ–≤–µ—Ä—å, –Ω–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</h2>
        <p class="text-gray-400 mb-6">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ email, IP, —Ç–µ–ª–µ—Ñ–æ–Ω—É –∏ –¥–∞–∂–µ —É–≥–∞–¥—ã–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π</p>
      </section>

      <!-- –í–∫–ª–∞–¥–∫–∏ -->
      <div class="flex justify-center gap-2 mb-6">
        <button class="tab-btn px-4 py-2 rounded bg-green-600" data-tab="ip">IP</button>
        <button class="tab-btn px-4 py-2 rounded bg-gray-700" data-tab="leak">–£—Ç–µ—á–∫–∏</button>
        <button class="tab-btn px-4 py-2 rounded bg-gray-700" data-tab="akinator">–ê–∫–∏–Ω–∞—Ç–æ—Ä</button>
      </div>

      <!-- IP Check -->
      <section id="tab-ip" class="tab-section">
        <p class="mb-4">–ú—ã –æ–ø—Ä–µ–¥–µ–ª–∏–º –≤–∞—à IP –∏ –ø—Ä–æ–≤–µ—Ä–∏–º: –≥–µ–æ, VPN/Proxy, —Ä–∏—Å–∫ –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã.</p>
        <form id="ipForm" class="flex gap-2 mb-4">
          <input id="ipInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ IP..." class="flex-1 px-3 py-2 rounded bg-gray-800" required />
          <button type="submit" class="px-4 py-2 bg-blue-600 rounded">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </form>
        <div id="ipResult" class="text-sm"></div>
      </section>

      <!-- Leak Check -->
      <section id="tab-leak" class="tab-section hidden">
        <form id="leakForm" class="flex gap-2 mb-4">
          <input id="queryInput" type="text" placeholder="Email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω..." class="flex-1 px-3 py-2 rounded bg-gray-800" required />
          <button type="submit" class="px-4 py-2 bg-blue-600 rounded">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </form>
        <div id="leakResult" class="text-sm"></div>
      </section>

      <!-- Akinator -->
      <section id="tab-akinator" class="tab-section hidden">
        <div id="akinatorQuestion">–ò—Å–ø–æ–ª—å–∑—É–µ—à—å –∏–º—è –≤ –ø–∞—Ä–æ–ª–µ?</div>
        <div class="mt-4 flex gap-2">
          <button class="akinator-btn px-3 py-1 bg-green-600 rounded" data-answer="yes">–î–∞</button>
          <button class="akinator-btn px-3 py-1 bg-red-600 rounded" data-answer="no">–ù–µ—Ç</button>
          <button class="akinator-btn px-3 py-1 bg-gray-600 rounded" data-answer="maybe">–ù–µ –∑–Ω–∞—é</button>
        </div>
        <div id="akinatorResult" class="mt-4 text-sm"></div>
      </section>
    </main>

    <footer class="text-center text-gray-500 text-sm py-6 border-t border-gray-800">
      ¬© 2025 SafePassAI
    </footer>

    <script>
      const sections = document.querySelectorAll('.tab-section');
      const tabs = document.querySelectorAll('.tab-btn');
      tabs.forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.forEach(b => b.classList.replace('bg-green-600', 'bg-gray-700'));
          btn.classList.replace('bg-gray-700', 'bg-green-600');
          sections.forEach(sec => sec.classList.add('hidden'));
          document.querySelector(`#tab-${btn.dataset.tab}`).classList.remove('hidden');
        });
      });

      document.getElementById('themeToggle').addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
      });

      async function fetchClientIP() {
        const res = await fetch('https://api.ipify.org?format=json');
        return (await res.json()).ip;
      }

      async function fetchIPInfo(ip) {
        const res = await fetch(`https://safe-pass-api.onrender.com/ip-info?ip=${ip}`);
        return await res.json();
      }

      document.addEventListener('DOMContentLoaded', async () => {
        const ip = await fetchClientIP();
        document.getElementById('ipInput').value = ip;
        const data = await fetchIPInfo(ip);
        renderIPResult(data);
      });

      document.getElementById('ipForm').addEventListener('submit', async e => {
        e.preventDefault();
        const ip = document.getElementById('ipInput').value;
        const data = await fetchIPInfo(ip);
        renderIPResult(data);
      });

      function renderIPResult(data) {
        const div = document.getElementById('ipResult');
        if (data.error) return div.innerHTML = `<span class='text-red-400'>${data.error}</span>`;
        div.innerHTML = `
          <p><strong>–ì–æ—Ä–æ–¥:</strong> ${data.city || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
          <p><strong>–°—Ç—Ä–∞–Ω–∞:</strong> ${data.country || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
          <p><strong>VPN/Proxy:</strong> ${data.proxy ? '–î–∞' : '–ù–µ—Ç'}</p>
          <p><strong>ASN:</strong> ${data.asn || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
          <p><strong>Reverse DNS:</strong> ${data.reverse_dns || '–Ω–µ –Ω–∞–π–¥–µ–Ω–æ'}</p>
          <p><strong>Privacy Score:</strong> ${data.privacy_score ?? '‚Äî'}</p>
        `;
      }

      document.getElementById('leakForm').addEventListener('submit', async e => {
        e.preventDefault();
        const query = document.getElementById('queryInput').value;
        const res = await fetch(`https://safe-pass-api.onrender.com/check?query=${encodeURIComponent(query)}`);
        const data = await res.json();
        const div = document.getElementById('leakResult');
        if (data && data.found) {
          div.innerHTML = `<p class='text-green-400'>–ù–∞–π–¥–µ–Ω—ã —É—Ç–µ—á–∫–∏: ${data.found}</p><ul class='list-disc ml-5'>` +
            data.results.map(r => `<li>${r.name || r.source}</li>`).join('') + '</ul>';
        } else {
          div.innerHTML = `<p class='text-yellow-400'>–£—Ç–µ—á–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>`;
        }
      });

      // Akinator
      const questions = [
        { q: "–¢—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Å–≤–æ—ë –∏–º—è –≤ –ø–∞—Ä–æ–ª–µ?", key: "name" },
        { q: "–î–æ–±–∞–≤–ª—è–µ—à—å –ª–∏ —Ç—ã —Ü–∏—Ñ—Ä—ã —Ç–∏–ø–∞ 123?", key: "nums" },
        { q: "–í–∫–ª—é—á–∞–µ—à—å –≥–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è?", key: "year" },
        { q: "–ò—Å–ø–æ–ª—å–∑—É–µ—à—å –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã?", key: "caps" },
      ];
      let answers = {}, current = 0;
      document.querySelectorAll('.akinator-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          answers[questions[current].key] = btn.dataset.answer;
          current++;
          if (current < questions.length) {
            document.getElementById('akinatorQuestion').textContent = questions[current].q;
          } else {
            showGuesses();
          }
        });
      });

      function showGuesses() {
        const guesses = [];
        const name = 'ivan', year = '2001';
        if (answers.name === 'yes') guesses.push(name);
        if (answers.name === 'yes' && answers.nums === 'yes') guesses.push(name + '123');
        if (answers.caps === 'yes') guesses.push(name.charAt(0).toUpperCase() + name.slice(1));
        if (answers.year === 'yes') guesses.push(name + year);
        if (guesses.length === 0) guesses.push('password123', 'qwerty', '12345678');
        document.getElementById('akinatorQuestion').textContent = '–í–æ–∑–º–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏:';
        document.getElementById('akinatorResult').innerHTML = '<ul class="list-disc ml-5">' +
          guesses.map(g => `<li>${g}</li>`).join('') + '</ul>';
        document.querySelectorAll('.akinator-btn').forEach(b => b.style.display = 'none');
      }
    </script>
  </body>
</html>
